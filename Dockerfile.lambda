# Dockerfile for AWS Lambda with Express.js
FROM public.ecr.aws/lambda/nodejs:20

# Set working directory
WORKDIR ${LAMBDA_TASK_ROOT}

# Copy package files
COPY package*.json ./

# Install dependencies
RUN npm ci --only=production

# Copy application code
COPY index.js ./
COPY lambda-handler.js ./

# Note: Lambda runtime already runs as a non-root user (sbx_user1051)
# No need to create additional users

# Set the CMD to your handler
CMD [ "lambda-handler.handler" ]
